<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="intro">
	<insert id="introUpload" parameterType="java.util.HashMap">
		insert into introList
		(user, id, name, addr, school, subject, type, year, admission, typical, pass, content1, content2, content3, title, content4, day)
		values
		(#{user}, #{id}, #{name}, #{addr}, #{school}, #{subject}, #{type}, #{year}, #{admission}, #{typical}, #{pass}, #{content1},
		#{content2}, #{content3}, #{title}, #{content4}, now())
	</insert>
	<select id="introUniv" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		select * from introList where user = #{user} and school = #{school}
	</select>
	<update id="introUpdate" parameterType="java.util.HashMap">
		update introList set content1 = #{content1}, content2 = #{content2}, content3 = #{content3}, title = #{title}, content4 = #{content4},
		day = now() where user = #{user} and school = #{school}
	</update>
	<select id="introList" resultType="java.util.HashMap">
		select * from introList a, salesList b, memberList c
		where a.id = b.id and b.id = c.id and (c.admin = '판매자' or c.admin = '메인과리자')
		order by a.auto desc limit 12 offset #{page}
	</select>
	<select id="introCount" resultType="java.lang.Integer">
		select count(*) from introList a, salesList b where a.id = b.id
	</select>
	<select id="introOne" resultType="java.util.HashMap">
		select * from introList where auto = #{num}
	</select>
	<select id="search" resultType="java.util.HashMap">
		select * from introList a, salesList b where a.id = b.id and (a.school like #{word} or a.subject like #{word}) order by a.auto desc
		limit 12 offset #{page}
	</select>
	<select id="introCount2" resultType="java.lang.Integer">
		select count(*) from introList a, salesList b where a.id = b.id and (a.school like #{word} or a.subject like #{word})
	</select>







	<select id="word" resultType="java.util.HashMap">
		select * from university where name like #{word}
	</select>
</mapper>